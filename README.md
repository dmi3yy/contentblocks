## Content Blocks for Evolution CMS

Конфигурация для блоков берется из папки config. Для создания нового блока нужно создать в этой папке файл .php, который должен вернуть ассоциативный массив. Структура массива следующая:

<table>
<tr><th>Ключ</th><th>Значение</th></tr>
<tr><td>title</td><td>Название блока, видимое менеджеру при заполнении</td></tr>
<tr>
<td>fields</td>
<td>
Ассоциативный массив используемых полей, в котором ключами являются идентификаторы полей, а значениями - массивы опций этих полей.

Возможные типы полей и опции приведены ниже.
</td>
</tr>
<tr>
<td>templates</td>
<td>
Ассоциативный массив, содержащий шаблон для ключа "owner", а также шаблоны для каждой группы полей.

Т.е. если, например, в массиве полей используется группа "images", то в шаблонах должен быть определен элемент с ключом "images", который будет содержать либо строку шаблона:

```
'images' => '<img src="[+image+]" alt="[+title+]" class="slide">'
```

либо ассоциативный массив шаблонов:

```
'images' => [
  'item'  => '<img src="[+image+]" alt="[+title+]" class="slide">',
  'thumb' => '<div class="thumb" style="background-image: url([+image+])"></div>',
],
```

Во втором случае вывод этих элементов в родительском шаблоне можно использовать как "[+images.item+]" и "[+images.thumb+]".
</td>
</tr>
</table>

#### Структура массива для описания поля

<table>
<tr><th>Ключ</th><th>Значение</th></tr>
<tr><td>caption</td><td>Название поля, которое видит менеджер</td></tr>
<tr><td>type</td><td>Тип поля, см. ниже</td></tr>
<tr><td>theme</td><td>Тема редактора для поля "richtext", доступные значения можно посмотреть в конфигурации Evolution CMS, на вкладке "Интерфейс"</td></tr>
<tr><td>options</td><td>Дополнительные опции для поля "richtext", значения можно посмотреть <a href="https://www.tinymce.com/docs/configure/" target="_blank">здесь</a></td></tr>
<tr><td>fields</td><td>Вложенные поля, для типа "group"</td></tr>
</table>

#### Типы полей

<table>
<tr><th>Значение</th><th>Описание</th></tr>
<tr><td>text</td><td>Текстовое однострочное поле</td></tr>
<tr><td>image</td><td>Текстовое поле с миниатюрой и кнопкой для выбора изображения</td></tr>
<tr><td>richtext</td><td>Текстовый редактор TinyMCE 4</td></tr>
<tr><td>group</td><td>Группа полей, обязательно должны быть определены вложенные поля в ключе "fields"</td></tr>
</table>

#### Примеры конфигурации

Примеры конфигурации можно найти <a href="https://github.com/sunhaim/contentblocks/tree/master/assets/plugins/contentblocks/config" target="_blank">здесь</a>
